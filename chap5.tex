\chapter{蒙特卡洛智能体}
\label{section:MonteCarloPlayers}

\section{蒙特卡洛搜索智能体}
\label{section:MonteCarloSearchPlayer}

除了随机和规则智能体外，本文主要测试的智能体由蒙特卡洛搜索进行实现。具体而言，本文使用的蒙特卡洛智能体实现了可用于解决多臂赌博机问题的~UCB1~算法\cite{auer2002finite}。
在多臂赌博机问题中，参与者需要在若干个随机出奖的赌博机之间进行选择，而使用~UCB1~算法能确保参与者在足够多次的尝试后获得最高的收益。

UCB1~算法的基本过程如下所述：
\begin{itemize}
\item[初始化] 对每个赌博机各尝试一次；
\item[循环] 选取使得公式
\begin{equation}
\label{eq:UCB}
\bar{x}_j + C\sqrt{\frac{\ln n}{n_j}}
\end{equation}
最大化的赌博机$j$进行尝试。其中$\bar{x}_j$为赌博机$j$过往的平均收益，$C$为一个$0$和$1$之间的常数，决定搜索算法尝试其他赌博机的可能性大小；$n_j$为赌博机$j$过去被尝试的次数，$n=\sum_i n_i$为尝试次数的总和。
\end{itemize}

根据~UCB1~算法的基本过程，将其应用于炉石传说也并非难事。蒙特卡洛智能体的决策过程基本如下：
\begin{enumerate}
\item 根据当前游戏状态枚举出智能体在当前回合可以进行的所有操作序列；
\item 为每个可进行的操作序列均将游戏模拟至游戏结束，并保存模拟的结果；
\item 进入UCB1算法的循环阶段，使用公式\ref{eq:UCB}选取操作序列并将游戏模拟至游戏结束，然后保存模拟的结果；
\item 在满足一定的预设条件后结束循环，并返回平均收益$\bar{x}_j$最高的操作序列。
\end{enumerate}